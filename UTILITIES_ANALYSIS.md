# ะะฝะฐะปะธะท ะฒัะฟะพะผะพะณะฐัะตะปัะฝัั ัะบัะธะฟัะพะฒ ChatGeist

## ะะฑะทะพั

ะ ะฟัะพะตะบัะต ะฟัะตะดััะฐะฒะปะตะฝะพ 4 ะฒัะฟะพะผะพะณะฐัะตะปัะฝัั ัะบัะธะฟัะฐ ะดะปั ะฝะฐัััะพะนะบะธ, ัะตััะธัะพะฒะฐะฝะธั ะธ ัะฐะฑะพัั ั AI.

---

## 1. check_setup.py

**ะะฐะทะฝะฐัะตะฝะธะต:** ะะธะฐะณะฝะพััะธะบะฐ ะธ ะฟัะพะฒะตัะบะฐ ะฝะฐัััะพะนะบะธ ะฟัะพะตะบัะฐ

**ะะฐะฟััะบ:** `uv run python check_setup.py`

### ะคัะฝะบัะธะธ ะฟัะพะฒะตัะบะธ:

| ะคัะฝะบัะธั | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| `check_dependencies()` | ะัะพะฒะตััะตั ัััะฐะฝะพะฒะบั aiogram, aiosqlite, python-dotenv |
| `check_env()` | ะัะพะฒะตััะตั ะฝะฐะปะธัะธะต .env ะธ ะฒะฐะปะธะดะฝะพััั TELEGRAM_BOT_TOKEN |
| `check_database()` | ะัะพะฒะตััะตั ะะ: ัััะตััะฒะพะฒะฐะฝะธะต, ััััะบัััั, ะบะพะปะธัะตััะฒะพ ะทะฐะฟะธัะตะน |

### ะงัะพ ะฟัะพะฒะตััะตััั:

1. **ะะฐะฒะธัะธะผะพััะธ:**
   - aiogram
   - aiosqlite
   - python-dotenv

2. **ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:**
   - ะะฐะปะธัะธะต ัะฐะนะปะฐ .env
   - ะะฐะปะธัะธะต TELEGRAM_BOT_TOKEN
   - ะัะพะฒะตัะบะฐ ััะพ ัะพะบะตะฝ ะฝะต ะธะท ะฟัะธะผะตัะฐ

3. **ะะฐะทะฐ ะดะฐะฝะฝัั:**
   - ะกััะตััะฒะพะฒะฐะฝะธะต ัะฐะนะปะฐ telegram_messages.db
   - ะะฐะปะธัะธะต ัะฐะฑะปะธัั `messages`
   - ะกัะฐัะธััะธะบะฐ: ะฒัะตะณะพ ัะพะพะฑัะตะฝะธะน, ะฝะต ัะปัะถะตะฑะฝัั, ั ัะตะบััะพะผ

### ะัะฒะพะด:
- ะฆะฒะตัะฝัะต ััะฐัััั (ัะผะพะดะทะธ)
- ะะพะดัะบะฐะทะบะธ ะฟะพ ะธัะฟัะฐะฒะปะตะฝะธั ะพัะธะฑะพะบ
- ะัะพะณะพะฒัะน ััะฐััั: ะณะพัะพะฒ/ะฝะต ะณะพัะพะฒ ะบ ะทะฐะฟััะบั

---

## 2. check_models.py

**ะะฐะทะฝะฐัะตะฝะธะต:** ะัะพัะผะพัั ะดะพัััะฟะฝัั ะผะพะดะตะปะตะน Gemini API

**ะะฐะฟััะบ:** `uv run python check_models.py`

### ะคัะฝะบัะธะพะฝะฐะปัะฝะพััั:

```python
# ะะพะฝัะธะณััะฐัะธั API
genai.configure(api_key=os.getenv('GEMINI_API_KEY'))

# ะัะฒะพะด ะผะพะดะตะปะตะน ั ะฟะพะดะดะตัะถะบะพะน generateContent
for model in genai.list_models():
    if 'generateContent' in model.supported_generation_methods:
        print(f'  - {model.name}')
```

### ะะฐะฒะธัะธะผะพััะธ:
- python-dotenv
- google-generativeai

### ะัะฟะพะปัะทะพะฒะฐะฝะธะต:
ะะพะปะตะทะตะฝ ะดะปั ะฒัะฑะพัะฐ ะผะพะดะตะปะธ ะฟัะธ ะฝะฐัััะพะนะบะต bot_gemini.py

---

## 3. ask_claude_cli.py

**ะะฐะทะฝะฐัะตะฝะธะต:** CLI-ะพะฑัััะบะฐ ะดะปั ะพัะฟัะฐะฒะบะธ ะฒะพะฟัะพัะพะฒ ะฒ Claude ั ะบะพะฝัะตะบััะพะผ ะะ

**ะะฐะฟััะบ:**
```bash
python ask_claude_cli.py 'ะฒะฐั ะฒะพะฟัะพั' [output.md] [ะฟััั_ะบ_ะฑะด]
```

### ะัะฝะพะฒะฝัะต ััะฝะบัะธะธ:

| ะคัะฝะบัะธั | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| `ask_claude()` | ะัะฟัะฐะฒะปัะตั ะฒะพะฟัะพั ะฒ Claude CLI, ะฒะพะทะฒัะฐัะฐะตั ะพัะฒะตั |
| `ask_claude_cli()` | ะะฑัััะบะฐ ั ัะพััะฐะฝะตะฝะธะตะผ ะฒ markdown ัะฐะนะป |

### ะะฐัะฐะผะตััั ask_claude():

```python
def ask_claude(
    question: str,           # ะะพะฟัะพั ะดะปั Claude
    db_path: str = "telegram_messages.db",  # ะััั ะบ ะะ
    return_only: bool = False  # True = ัะพะปัะบะพ ะฒะตัะฝััั ัะตะทัะปััะฐั
) -> str
```

### ะัะพะผะฟั:
ะะฒัะพะผะฐัะธัะตัะบะธ ัะพัะผะธััะตั ะฟัะพะผะฟั ั ะพะฟะธัะฐะฝะธะตะผ ััััะบัััั ะะ:
- ะะฟะธัะฐะฝะธะต ัะฐะฑะปะธัั messages
- ะะตัะตัะธัะปะตะฝะธะต ะฟะพะปะตะน (id, timestamp, message, sender_username ะธ ะดั.)
- ะะพะฝัะตะบัั ะดะปั ะฐะฝะฐะปะธะทะฐ

### ะคะปะฐะณะธ Claude CLI:
- `--print` โ ะฝะตะธะฝัะตัะฐะบัะธะฒะฝัะน ัะตะถะธะผ
- `--dangerously-skip-permissions` โ ะฐะฒัะพะผะฐัะธัะตัะบะพะต ัะฐะทัะตัะตะฝะธะต ะบะพะผะฐะฝะด

### ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะบะฐะบ ะฑะธะฑะปะธะพัะตะบะฐ:
```python
from ask_claude_cli import ask_claude
response = ask_claude("ะกะบะพะปัะบะพ ัะพะพะฑัะตะฝะธะน?", return_only=True)
```

### ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะบะฐะบ CLI:
```bash
python ask_claude_cli.py 'ะัะพ ัะฐะผัะน ะฐะบัะธะฒะฝัะน?' analysis.md
```

---

## 4. test_integration.py

**ะะฐะทะฝะฐัะตะฝะธะต:** ะะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั ะดะปั ะฟัะพะฒะตัะบะธ ัะฐะฑะพัั ะผะพะดัะปะตะน

**ะะฐะฟััะบ:** `uv run python test_integration.py`

### ะขะตััั:

| ะขะตัั | ะะฟะธัะฐะฝะธะต |
|------|----------|
| `test_imports()` | ะัะพะฒะตัะบะฐ ะธะผะฟะพััะฐ ask_claude ะธ TelegramAnalyzer |
| `test_analyzer_init()` | ะะฝะธัะธะฐะปะธะทะฐัะธั ะฐะฝะฐะปะธะทะฐัะพัะฐ ะธ ะฟะพะดะบะปััะตะฝะธะต ะบ ะะ |
| `test_search()` | ะะพะธัะบ ัะพะพะฑัะตะฝะธะน ะฟะพ ะบะปััะตะฒัะผ ัะปะพะฒะฐะผ |

### ะกัััะบัััะฐ ะฒัะฒะพะดะฐ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   ๐งช ะขะตัั ะธะฝัะตะณัะฐัะธะธ telegram_analyzer + Claude CLI  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ฆ ะขะตัั 1: ะัะพะฒะตัะบะฐ ะธะผะฟะพััะพะฒ...
๐ง ะขะตัั 2: ะะฝะธัะธะฐะปะธะทะฐัะธั TelegramAnalyzer...
๐ ะขะตัั 3: ะะพะธัะบ ัะพะพะฑัะตะฝะธะน...

๐ ะะขะะะ ะขะะกะขะะะะะะะะฏ:
โ PASSED: ะะผะฟะพััั
โ PASSED: ะะฝะธัะธะฐะปะธะทะฐัะธั
โ PASSED: ะะพะธัะบ
ะัะพะนะดะตะฝะพ: 3/3
```

### ะะฐะฒะธัะธะผะพััะธ:
- telegram_analyzer.py (ะผะพะดัะปั TelegramAnalyzer)
- ask_claude_cli.py

---

## ะกัะฐะฒะฝะธัะตะปัะฝะฐั ัะฐะฑะปะธัะฐ

| ะกะบัะธะฟั | ะขะธะฟ | ะะฐะฒะธัะธะผะพััะธ | ะะฝัะตัะฐะบัะธะฒะฝัะน |
|--------|-----|-------------|---------------|
| check_setup.py | ะะธะฐะณะฝะพััะธะบะฐ | dotenv, sqlite3 | ะะตั |
| check_models.py | ะฃัะธะปะธัะฐ | google-generativeai | ะะตั |
| ask_claude_cli.py | CLI + ะฑะธะฑะปะธะพัะตะบะฐ | Claude CLI | ะะตั |
| test_integration.py | ะขะตััั | telegram_analyzer | ะะตั |

---

## ะะพััะดะพะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะัะธ ะฟะตัะฒะพะฝะฐัะฐะปัะฝะพะน ะฝะฐัััะพะนะบะต:

```bash
# 1. ะัะพะฒะตัะธัั ะฝะฐัััะพะนะบั ะฟัะพะตะบัะฐ
uv run python check_setup.py

# 2. ะัะพะฒะตัะธัั ะดะพัััะฟะฝัะต ะผะพะดะตะปะธ Gemini (ะพะฟัะธะพะฝะฐะปัะฝะพ)
uv run python check_models.py

# 3. ะะฐะฟัััะธัั ะธะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั
uv run python test_integration.py

# 4. ะขะตััะพะฒัะน ะทะฐะฟัะพั ะฒ Claude
python ask_claude_cli.py 'ะกะบะพะปัะบะพ ะฒัะตะณะพ ัะพะพะฑัะตะฝะธะน?' test.md
```

### ะัะธ ะพัะปะฐะดะบะต:

```bash
# ะัะพะฒะตัะธัั ััะพ ะฒัั ะฝะฐัััะพะตะฝะพ
uv run python check_setup.py

# ะขะตัั ะธะฝัะตะณัะฐัะธะธ ะผะพะดัะปะตะน
uv run python test_integration.py
```

---

## ะะตะบะพะผะตะฝะดะฐัะธะธ

1. **check_setup.py** โ ะทะฐะฟััะบะฐัั ะฟะตัะตะด ะฟะตัะฒัะผ ะทะฐะฟััะบะพะผ ะฑะพัะฐ
2. **check_models.py** โ ะธัะฟะพะปัะทะพะฒะฐัั ะฟัะธ ะฒัะฑะพัะต ะผะพะดะตะปะธ Gemini
3. **ask_claude_cli.py** โ ะดะปั ะฑัััััั ัะตััะพะฒัั ะทะฐะฟัะพัะพะฒ ะบ Claude
4. **test_integration.py** โ ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ ะผะพะดัะปะตะน telegram_analyzer ะธะปะธ ask_claude_cli
