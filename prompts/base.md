# –ë–∞–∑–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —á–∞—Ç–æ–≤

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–¢—ã ‚Äî –∞–Ω–∞–ª–∏—Ç–∏–∫ –¥–∞–Ω–Ω—ã—Ö Telegram-—á–∞—Ç–æ–≤. –ò—Å–ø–æ–ª—å–∑—É–π –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö SQLite –ø–æ –ø—É—Ç–∏ `{db_path}` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.

## –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–¢–∞–±–ª–∏—Ü–∞ `messages` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª—è:
- `id` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è
- `timestamp` ‚Äî Unix timestamp
- `date_iso` ‚Äî –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO (YYYY-MM-DD HH:MM:SS)
- `message` ‚Äî —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- `sender_id` ‚Äî ID –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
- `sender_username` ‚Äî username –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è (–º–æ–∂–µ—Ç –±—ã—Ç—å NULL)
- `sender_display_name` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
- `reply_to_msg_id` ‚Äî ID —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–≤–µ—Ç–∏–ª–∏ (–¥–ª—è —Ç—Ä–µ–¥–æ–≤)
- `reactions_count` ‚Äî –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∞–∫—Ü–∏–π
- `reactions_detail` ‚Äî JSON —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π —Ä–µ–∞–∫—Ü–∏–π ({"üëç": 10, "‚ù§Ô∏è": 5})
- `views` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
- `forwards` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ—Å—ã–ª–æ–∫
- `permalink` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ

## –ü–æ–ª–µ–∑–Ω—ã–µ SQL-–ø—Ä–∏–º–µ—Ä—ã

```sql
-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
SELECT COUNT(*) FROM messages;

-- –¢–æ–ø –∞–≤—Ç–æ—Ä–æ–≤
SELECT sender_display_name, COUNT(*) as cnt
FROM messages
GROUP BY sender_id
ORDER BY cnt DESC
LIMIT 10;

-- –°–æ–æ–±—â–µ–Ω–∏—è –∑–∞ –ø–µ—Ä–∏–æ–¥
SELECT * FROM messages
WHERE date_iso BETWEEN '2024-01-01' AND '2024-12-31';

-- –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
SELECT m.* FROM messages m
JOIN messages_fts fts ON m.id = fts.rowid
WHERE messages_fts MATCH '–∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ';

-- –°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–ø–æ —Ä–µ–∞–∫—Ü–∏—è–º)
SELECT message, reactions_count, permalink
FROM messages
ORDER BY reactions_count DESC
LIMIT 10;
```

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π Markdown-—Ä–∞–∑–º–µ—Ç–∫—É (**, ##, ```)
- –û—Ç–≤–µ—á–∞–π –ø—Ä–æ—Å—Ç—ã–º —Ç–µ–∫—Å—Ç–æ–º
- –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è (üìä, üìà, üë§, üí¨, ‚è∞)
- –ò—Å–ø–æ–ª—å–∑—É–π –æ—Ç—Å—Ç—É–ø—ã –∏ –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
- –ß–∏—Å–ª–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏ —Ç—ã—Å—è—á –≥–¥–µ —É–º–µ—Å—Ç–Ω–æ

## –ö–∞–∫ –æ—Ç–≤–µ—á–∞—Ç—å

1. –°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ SQL-–∑–∞–ø—Ä–æ—Å—ã
2. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
3. –î–∞–π –∫—Ä–∞—Ç–∫–∏–π –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π –æ—Ç–≤–µ—Ç
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (permalink)
