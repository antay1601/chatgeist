# Dockerfile для безопасного запуска Claude CLI в изолированном окружении
FROM node:20-slim

# Устанавливаем минимальный набор утилит
RUN apt-get update && apt-get install -y \
    sqlite3 \
    && rm -rf /var/lib/apt/lists/*

# Создаем рабочую директорию
RUN mkdir -p /workspace && chown node:node /workspace

# Устанавливаем Claude CLI глобально через npm
RUN npm install -g @anthropic-ai/claude-code

# Используем встроенного пользователя node (UID 1000)
USER node
WORKDIR /workspace

# Команда по умолчанию - ждать команд
CMD ["tail", "-f", "/dev/null"]
